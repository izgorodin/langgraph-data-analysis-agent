# ADR 002 — Архитектурный паттерн узлового графа

Дата: 2025-08-18

## Статус
Принято

## Контекст
Агент должен выполнять предсказуемый, проверяемый и трассируемый конвейер от запроса до отчёта, включая проверки безопасности.

## Решение
Использовать явный граф состояний LangGraph с узлами:
`plan → synthesize_sql → validate_sql → execute_sql → analyze_df → report`.

## Последствия
- Прозрачность и контроль над каждым шагом
- Быстрое расширение/замена узлов
- Упрощённая трассировка (verbose) и обработка ошибок
